# Use a whitelist of files and directories for the top level directory.

# ignore everything initially
*

# keep some dot files
!.bash_completion
!.fetchmailrc.dist
!.mailfilter.dist
!.procmailrc.dist
!.screenrc

# keep some files from the top level
!AUTHORS.md
!CHANGES.md
!CONTRIBUTING.md
!COPYING-Third-Party
!cpanfile.docker
!INSTALL.md
!LICENSE
!README.md
!RELEASE
!SECURITY.md
!UPDATING.md

# keep some dirs from the top level
!bin
!Custom
!doc
!i18n
!Kernel
!scripts
!var
var/httpd/htdocs/skins/Agent/*/css-cache/*
var/httpd/htdocs/js/js-cache/*

# The dot files in the subdirectories are kept kept per default.
# The not wanted dot files are listed here explicitly.
# The .keep files force git to keep the directories, they are not needed in the image.
**/.keep

# ignore files that might be generated during development
var/httpd/htdocs/SeleniumScreenshots

# ignore editor swap files and other temporary files
**/.#*
**/*.sw?
**/*~

# ignore files that are only needed only for building the docker image
bin/docker/build_docker_images.sh
bin/docker/lint_docker_files.sh
bin/devel

# ignore Config.pm.dist, as Config.pm.docker.dist is actually used
Kernel/Config.pm.dist

# ignore files only needed for Apache, see also Kernel::System::Environment where the ignored modules are special cased
scripts/apache*
bin/cgi-bin
Kernel/System/SupportDataCollector/Plugin/Webserver/Apache

# no need for cronjobs in Docker image
var/cron
bin/Cron.sh

# this is for the case when the image is not created from a clean git checkout
Kernel/Config.pm
Kernel/Config/Files/*.pm
var/article/*
var/log/*
var/run/
var/sessions/*
var/spool/*
var/tmp/

# in case somebody generated keys or certificates,
# but keep the sample files needed for the unit tests
**/*.cert
**/*.crt
!scripts/test/sample/SMIME/SMIME*.crt
**/*.csr
**/*.key
!scripts/test/sample/SMIME/SMIME*.key
**/*.pem
!Kernel/cpan-lib/Mozilla/CA/cacert.pem
!scripts/test/sample/SMIME/SMIME*.pem
!scripts/test/sample/SSL/*.pem
**/*.chain
